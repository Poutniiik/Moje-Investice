name: Unit Tester ðŸ§ª

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:
  run-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # ðŸ•µï¸â€â™‚ï¸ NOVÃ KROK: Inspekce mÃ­sta Äinu
      - name: Inspekce souborÅ¯ (Sherlock Holmes)
        run: |
          echo "ðŸ“‚ Vypisuji soubory v aktuÃ¡lnÃ­ sloÅ¾ce:"
          ls -la
          echo "-----------------------------------"
          if [ -f requirements.txt ]; then
            echo "âœ… requirements.txt NALEZEN! Obsah:"
            cat requirements.txt
          else
            echo "âŒ requirements.txt NENALEZEN!"
            echo "HledÃ¡m jakÃ©koliv podobnÃ© soubory..."
            find . -maxdepth 2 -name "req*"
          fi

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pytest
          # ZkusÃ­me instalovat, a pokud to selÅ¾e, chceme vidÄ›t proÄ
          pip install pandas
          pip install streamlit>=1.28.0
          pip install yfinance>=0.2.40
          pip install plotly
          pip install PyGithub
          pip install matplotlib
          pip install requests
          pip install requests-cache
          pip install streamlit-lottie
          pip install google-generativeai
          pip install feedparser
          pip install fpdf
          pip install extra-streamlit-components
          pip install kaleido
          pip install wordcloud
          pip install prophet
          pip install plaid-python
          pip install gTTS
          pip install streamlit-mic-recorder
          pip install SpeechRecognition

      - name: Run Pytest
        run: |
          pytest
