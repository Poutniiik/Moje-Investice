Automatick칠 spu코t캩n칤 denn칤ho reportu a jeho odesl치n칤 na Telegram.

name: 游늳 Denn칤 Telegram Report

Kdy se m치 workflow spustit

on:

1. Spust칤 se ka쬯칳 den v 18:00 UTC (tj. 20:00 SEL캛 / 19:00 SE캛)

schedule:
# Form치t: m h d m dny_v_tydnu
- cron: '0 18 * * *'

2. Umo쬹칤 ru캜n칤 spu코t캩n칤 z karty Actions (Vytvo콏칤 tla캜칤tko)

workflow_dispatch:

Definice jobu (칰lohy)

jobs:
generate_report:
# B캩쮂 na virtu치ln칤m stroji s Ubuntu
runs-on: ubuntu-latest

# !!! ZDE JE KL칈캛OV칄 ODSZEN칈 SEKCE steps !!!
steps:
  
  # Krok 1: Checkout k칩du (St치hne tv콢j repozit치콏)
  - name: 1. Z칤sk치n칤 k칩du z repozit치콏e
    uses: actions/checkout@v4

  # Krok 2: Nastaven칤 Pythonu
  - name: 2. Nastaven칤 prost콏ed칤 Python 3.11
    uses: actions/setup-python@v5
    with:
      python-version: '3.11' # Modern칤 verze
      cache: 'pip' # Rychlej코칤 instalace
      
  # Krok 3: Instalace z치vislost칤
  - name: 3. Instalace pot콏ebn칳ch knihoven
    # N치코 soubor requirements.txt obsahuje v코echny pot콏ebn칠 bal칤캜ky
    run: pip install -r requirements.txt

  # Krok 4: Spu코t캩n칤 Python skriptu s prom캩nn칳mi prost콏ed칤 (Secrets)
  - name: 4. Spu코t캩n칤 skriptu pro generov치n칤 a odesl치n칤 reportu
    env:
      # Prom캩nn칠 prost콏ed칤, kter칠 tv콢j Python skript 캜te:
      # GH_TOKEN: Pro p콏칤stup k tv칳m soubor콢m na GitHubu (nacti_csv)
      GH_TOKEN: ${{ secrets.GITHUB_REPORT_TOKEN }}
      # TELEGRAM_BOT_TOKEN a CHAT_ID: Pro odesl치n칤 zpr치vy
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
      
    run: |
      # Spust칤me n치코 fin치ln칤 skript
      python daily_reporter_bot.py
