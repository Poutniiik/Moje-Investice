
on:
  schedule:
    - cron: '0 12 * * *'
  
  # Toto je náš manuální spouštěč!
  workflow_dispatch:

Tímto zápisem říkáš GitHubu: "Spusť tento workflow buď podle plánu (`schedule`), **NEBO** když mi uživatel klikne na tlačítko v rozhraní (`workflow_dispatch`)."

Teď, když máš opravený a kompletní kód pro workflow i Python skript, můžeš oba soubory nahrát na GitHub a hned to otestovat ručním spuštěním! Jdeme dál!

steps:
- name: 1. Získání kódu z repozitáře
  uses: actions/checkout@v4

- name: 2. Nastavení prostředí Python 3.11
  uses: actions/setup-python@v5
  with:
    python-version: '3.11'
    
- name: 3. Instalace potřebných knihoven (requests, yfinance)
  run: |
    # Doporučuji zřídit soubor requirements.txt s obsahem 'requests'
    # Nyní instalujeme i yfinance pro data z burzy
    pip install requests yfinance

- name: 4. Spuštění skriptu pro generování a odeslání reportu
  run: python report_generator.py
  # Zde předáme uložené tajemství (Secrets) skriptu jako proměnné prostředí
  env:
    GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
    TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
    TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
